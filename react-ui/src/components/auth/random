import React, { useState } from 'react'
import axios from 'axios'

function FormRequest() {
	const [inputs, setInputs] = useState({
		name: '',
		email: '',
		tel: '',
		message: '',
	})

	const handleChange = e => {
		const { name, value } = e.target
		setInputs(prev => ({ ...prev, [name]: value }))
	}

	const handleSubmit = e => {
		e.preventDefault()
		//destructure from inputs
		const { name, email, tel, message } = inputs
		axios
			.post('/', {
				//make an object to be handled from req.body on the backend.
				name,
				email,
				tel,
				message,
				//change the name to represent text on the backend.
				text: 'End of message',
			})
			.then(res => {
				if (res) {
					alert(
						'Thanks for being awesome! We have received your message and appreciate you for reaching out. If your inquiry is urgent, please use the telephone number listed in our contact form to reach one of our staff members. Otherwise, we will reply by email as soon as possible.'
					)
				} else {
					alert(
						'Oops! The wires must have gotten crossed somewhere! Please retry your submission.'
					)
				}
			})
			.catch(err => {
				if (err.response) {
					alert(
						"Apologies for the inconvenience; your messages aren't being received at the moment. Please use the telephone number listed in our contact form to reach one of our staff members directly. If this issue persists, please email the webmaster at michael@ormica.com"
					)
				} else {
					alert(
						'Oops! The wires must have gotten crossed somewhere! Please retry your submission.'
					)
				}
			})
	}
